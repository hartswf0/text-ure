<prompt mode="universal" audience="expert" tone="crisp" output_form="spec+json">

  <intent>

    You are building an OPERATIVE EKPHRASIS MAPPER.

    The poem is not “content placed into space.” The poem is the OPERATOR that produces space.

    Implement a 24×24 semantic grid where reading is navigation and navigation is reading.



    Treat this as a computational operation correlating text and image (operative ekphrasis),

    not as mimetic illustration. The output must be executable as a world-layout manifest.

  </intent>



  <theory_anchor name="Bajohr">

    <t1>Ekphrasis here is performance: text and layout are in a consecutive causal relation.</t1>

    <t2>There are two texts: SURFACE-TEXT (what user sees) and CODE-TEXT (the rules that generate it).</t2>

    <t3>The system must be capable of “artificial semantics”: meaning emerges from correlations across the grid, not from any single line.</t3>

  </theory_anchor>



  <inputs>

    <grid size="24" coordinate_system="x,y" origin="0,0 top-left" center="12,12"/>

    <poem title="Ode on a Grecian Urn" author="John Keats">

      <stanza id="S1">

        <line id="L01">Thou still unravish'd bride of quietness,</line>

        <line id="L02">Thou foster-child of silence and slow time,</line>

        <line id="L03">Sylvan historian, who canst thus express</line>

        <line id="L04">A flowery tale more sweetly than our rhyme:</line>

        <line id="L05">What leaf-fring'd legend haunts about thy shape</line>

        <line id="L06">Of deities or mortals, or of both,</line>

        <line id="L07">In Tempe or the dales of Arcady?</line>

        <line id="L08">What men or gods are these? What maidens loth?</line>

        <line id="L09">What mad pursuit? What struggle to escape?</line>

        <line id="L10">What pipes and timbrels? What wild ecstasy?</line>

      </stanza>

      <stanza id="S2">

        <line id="L11">Heard melodies are sweet, but those unheard</line>

        <line id="L12">Are sweeter; therefore, ye soft pipes, play on;</line>

        <line id="L13">Not to the sensual ear, but, more endear'd,</line>

        <line id="L14">Pipe to the spirit ditties of no tone:</line>

        <line id="L15">Fair youth, beneath the trees, thou canst not leave</line>

        <line id="L16">Thy song, nor ever can those trees be bare;</line>

        <line id="L17">Bold Lover, never, never canst thou kiss,</line>

        <line id="L18">Though winning near the goal yet, do not grieve;</line>

        <line id="L19">She cannot fade, though thou hast not thy bliss,</line>

        <line id="L20">For ever wilt thou love, and she be fair!</line>

      </stanza>

      <stanza id="S3">

        <line id="L21">Ah, happy, happy boughs! that cannot shed</line>

        <line id="L22">Your leaves, nor ever bid the Spring adieu;</line>

        <line id="L23">And, happy melodist, unwearied,</line>

        <line id="L24">For ever piping songs for ever new;</line>

        <line id="L25">More happy love! more happy, happy love!</line>

        <line id="L26">For ever warm and still to be enjoy'd,</line>

        <line id="L27">For ever panting, and for ever young;</line>

        <line id="L28">All breathing human passion far above,</line>

        <line id="L29">That leaves a heart high-sorrowful and cloy'd,</line>

        <line id="L30">A burning forehead, and a parching tongue.</line>

      </stanza>

      <stanza id="S4">

        <line id="L31">Who are these coming to the sacrifice?</line>

        <line id="L32">To what green altar, O mysterious priest,</line>

        <line id="L33">Lead'st thou that heifer lowing at the skies,</line>

        <line id="L34">And all her silken flanks with garlands drest?</line>

        <line id="L35">What little town by river or sea shore,</line>

        <line id="L36">Or mountain-built with peaceful citadel,</line>

        <line id="L37">Is emptied of this folk, this pious morn?</line>

        <line id="L38">And, little town, thy streets for evermore</line>

        <line id="L39">Will silent be; and not a soul to tell</line>

        <line id="L40">Why thou art desolate, can e'er return.</line>

      </stanza>

      <stanza id="S5">

        <line id="L41">O Attic shape! Fair attitude! with brede</line>

        <line id="L42">Of marble men and maidens overwrought,</line>

        <line id="L43">With forest branches and the trodden weed;</line>

        <line id="L44">Thou, silent form, dost tease us out of thought</line>

        <line id="L45">As doth eternity: Cold Pastoral!</line>

        <line id="L46">When old age shall this generation waste,</line>

        <line id="L47">Thou shalt remain, in midst of other woe</line>

        <line id="L48">Than ours, a friend to man, to whom thou say'st,</line>

        <line id="L49">"Beauty is truth, truth beauty,—that is all</line>

        <line id="L50">Ye know on earth, and all ye need to know."</line>

      </stanza>

    </poem>

  </inputs>



  <requirements>

    <r id="R1">Produce TWO artifacts: (A) urn_ontology.json (B) grid_24x24.json.</r>

    <r id="R2">Every line L01–L50 must appear at least once in the grid mapping (no omissions).</r>

    <r id="R3">Allow VARIABLE ALLOCATION: a line may map to 1 cell or to a multi-cell region (span).</r>

    <r id="R4">Allocation must be EXPLAINED as an operational choice: repetition = chant/inscription; compression = knot/hinge.</r>

    <r id="R5">No “random placement.” All placement must follow urn-surface semantics and adjacency rules.</r>

    <r id="R6">Define TESTS: coverage_test, adjacency_test, density_budget_test, continuity_test.</r>

    <r id="R7">Output must include a reverse index: line_id -> list of (x,y) cells and/or spans.</r>

  </requirements>



  <urn_surface_model>

    <rule>

      Convert the poem’s ekphrasis into an urn topology with FIVE zones, each with geometry + reading law:



      Z0 LIP (inscription band): short, declarative, quotable lines; high repetition permitted.

      Z1 FRIEZE A (pursuit/music/trees): motion-without-arrival; lines about pursuit, pipes, unheard melodies.

      Z2 FRIEZE B (sacrifice/town): procession + emptied town; narrative paradox; silence.

      Z3 HANDLES (hinge passages): apostrophes and pivots (“O Attic shape!” “Cold Pastoral!”).

      Z4 BASE (axiom/closure): “Beauty is truth…” as a final anchored tablet; minimal but dominant placement.

    </rule>



    <mapping_to_grid>

      <law>

        Represent the urn as a “cylindrical unwrap” on a 24×24:

        - X axis = circumference (wrap-around adjacency: x=0 neighbors x=23).

        - Y axis = vertical height (0=lip, 23=base).

      </law>

      <bands>

        <band id="Z0" y_range="0..2"/>

        <band id="Z1" y_range="3..11"/>

        <band id="Z2" y_range="12..17"/>

        <band id="Z3" y_range="18..19"/>

        <band id="Z4" y_range="20..23"/>

      </bands>

    </mapping_to_grid>

  </urn_surface_model>



  <allocation_algorithm>

    <step id="A1">Tokenize poem into 50 line objects with ids.</step>



    <step id="A2">Assign each line to a PRIMARY ZONE (Z0–Z4) based on function:

      - Invocation & naming the urn (L01–L10, L41–L45) -> Z0+Z3 (inscription + handles).

      - Unheard music / frozen desire / trees (L11–L30) -> Z1.

      - Sacrifice + emptied town + silence (L31–L40) -> Z2.

      - Final axiom (L49–L50) -> Z4 (base tablet).

    </step>



    <step id="A3">Decide GRANULARITY per line:

      - “Chant / Inscription lines” get 6–18 cells distributed (controlled repetition).

      - “Scene-detail lines” get 2–6 cells in a local patch.

      - “Hinge lines” get 4–10 cells across Z3 handles (two symmetric clusters).

      - “Axiom lines” get 12–24 cells in Z4 with a single central tablet region + faint echoes.

    </step>



    <step id="A4">Place cells using CONTIGUITY first:

      - Prefer spans (rectangles or snakes) rather than scattered singletons.

      - Enforce adjacency: successive lines in a stanza should be near each other unless intentionally split as “call-and-response.”

    </step>



    <step id="A5">Enforce DENSITY BUDGET:

      - Each cell stores text up to max_chars=220 (or a reference pointer).

      - If a line exceeds max_chars, store an excerpt + pointer {line_id, full_text}.

      - If many lines crowd a zone, convert some to “index cells” that point to a local cluster (semantic compression).

    </step>



    <step id="A6">Generate reverse index and tests.</step>

  </allocation_algorithm>



  <tests>

    <coverage_test>

      Assert every line_id L01..L50 appears in reverse_index with at least 1 target.

    </coverage_test>



    <adjacency_test>

      For each stanza, compute average Manhattan distance between mapped regions of consecutive lines.

      Flag if avg distance exceeds threshold unless a declared “split_reason” is present.

    </adjacency_test>



    <density_budget_test>

      Assert no cell exceeds max_chars unless it is type="pointer" with stored excerpt <= max_chars.

    </density_budget_test>



    <continuity_test>

      Assert Z1 contains majority of L11–L30 placements; Z2 contains majority of L31–L40; Z4 contains majority of L49–L50.

    </continuity_test>

  </tests>



  <output_schema>

    <file name="urn_ontology.json">

      {

        "model": "urn_unwrap_24",

        "zones": [

          {"id":"Z0","name":"LIP","y_range":[0,2],"law":"inscription/refrain"},

          {"id":"Z1","name":"FRIEZE_A","y_range":[3,11],"law":"pursuit/music/trees"},

          {"id":"Z2","name":"FRIEZE_B","y_range":[12,17],"law":"sacrifice/town/silence"},

          {"id":"Z3","name":"HANDLES","y_range":[18,19],"law":"apostrophe/hinge/symmetry"},

          {"id":"Z4","name":"BASE","y_range":[20,23],"law":"axiom/tablet/closure"}

        ],

        "wraparound_x": true,

        "max_chars_per_cell": 220

      }

    </file>



    <file name="grid_24x24.json">

      {

        "grid_size": 24,

        "cells": [

          // 576 entries: { "x":0..23, "y":0..23, "zone":"Z1", "payload": { ... } }

        ],

        "payload_types": {

          "text": { "line_id":"Lxx", "excerpt":"...", "full_text":"...", "stanza":"Sx", "role":"chant|detail|hinge|axiom", "tags":[...] },

          "pointer": { "cluster_id":"C##", "line_ids":[...], "hint":"...", "tags":[...] }

        },

        "reverse_index": {

          "L01": [{"x":..,"y":..}, {"span":{"x0":..,"y0":..,"x1":..,"y1":..}}],

          "...": []

        },

        "tests_report": {

          "coverage_ok": true|false,

          "adjacency_ok": true|false,

          "density_ok": true|false,

          "continuity_ok": true|false,

          "notes":[]

        }

      }

    </file>

  </output_schema>



  <seal>

    Output the two JSON files only. No prose after.

    If any test fails, set coverage_ok/adjacency_ok/density_ok/continuity_ok = false and include notes that name the failing line_ids or zones.

  </seal>

</prompt> Ode on a Grecian Urn

Play Audio



By John Keats

Thou still unravish'd bride of quietness,

       Thou foster-child of silence and slow time,

Sylvan historian, who canst thus express

       A flowery tale more sweetly than our rhyme:

What leaf-fring'd legend haunts about thy shape

       Of deities or mortals, or of both,

               In Tempe or the dales of Arcady?

       What men or gods are these? What maidens loth?

What mad pursuit? What struggle to escape?

               What pipes and timbrels? What wild ecstasy?



Heard melodies are sweet, but those unheard

       Are sweeter; therefore, ye soft pipes, play on;

Not to the sensual ear, but, more endear'd,

       Pipe to the spirit ditties of no tone:

Fair youth, beneath the trees, thou canst not leave

       Thy song, nor ever can those trees be bare;

               Bold Lover, never, never canst thou kiss,

Though winning near the goal yet, do not grieve;

       She cannot fade, though thou hast not thy bliss,

               For ever wilt thou love, and she be fair!



Ah, happy, happy boughs! that cannot shed

         Your leaves, nor ever bid the Spring adieu;

And, happy melodist, unwearied,

         For ever piping songs for ever new;

More happy love! more happy, happy love!

         For ever warm and still to be enjoy'd,

                For ever panting, and for ever young;

All breathing human passion far above,

         That leaves a heart high-sorrowful and cloy'd,

                A burning forehead, and a parching tongue.



Who are these coming to the sacrifice?

         To what green altar, O mysterious priest,

Lead'st thou that heifer lowing at the skies,

         And all her silken flanks with garlands drest?

What little town by river or sea shore,

         Or mountain-built with peaceful citadel,

                Is emptied of this folk, this pious morn?

And, little town, thy streets for evermore

         Will silent be; and not a soul to tell

                Why thou art desolate, can e'er return.



O Attic shape! Fair attitude! with brede

         Of marble men and maidens overwrought,

With forest branches and the trodden weed;

         Thou, silent form, dost tease us out of thought

As doth eternity: Cold Pastoral!

         When old age shall this generation waste,

                Thou shalt remain, in midst of other woe

Than ours, a friend to man, to whom thou say'st,

         "Beauty is truth, truth beauty,—that is all

                Ye know on earth, and all ye need to know."