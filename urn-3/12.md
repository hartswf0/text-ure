<prompt id="OPS-SCHEMAS-24x24-v1"
        mode="system"
        audience="expert"
        tone="operational"
        output_form="schemas+rules">
  <intent>
    Attach operational schemas for:
    (1) grid cells,
    (2) zones,
    (3) traversal.
    These schemas must be machine-parseable and enforceable.
    The grid remains a ritual world (Carey), not an info table.
  </intent>
Ode on a Grecian Urn
Play Audio
By John Keats
Thou still unravish'd bride of quietness,
       Thou foster-child of silence and slow time,
Sylvan historian, who canst thus express
       A flowery tale more sweetly than our rhyme:
What leaf-fring'd legend haunts about thy shape
       Of deities or mortals, or of both,
               In Tempe or the dales of Arcady?
       What men or gods are these? What maidens loth?
What mad pursuit? What struggle to escape?
               What pipes and timbrels? What wild ecstasy?
Heard melodies are sweet, but those unheard
       Are sweeter; therefore, ye soft pipes, play on;
Not to the sensual ear, but, more endear'd,
       Pipe to the spirit ditties of no tone:
Fair youth, beneath the trees, thou canst not leave
       Thy song, nor ever can those trees be bare;
               Bold Lover, never, never canst thou kiss,
Though winning near the goal yet, do not grieve;
       She cannot fade, though thou hast not thy bliss,
               For ever wilt thou love, and she be fair!
Ah, happy, happy boughs! that cannot shed
         Your leaves, nor ever bid the Spring adieu;
And, happy melodist, unwearied,
         For ever piping songs for ever new;
More happy love! more happy, happy love!
         For ever warm and still to be enjoy'd,
                For ever panting, and for ever young;
All breathing human passion far above,
         That leaves a heart high-sorrowful and cloy'd,
                A burning forehead, and a parching tongue.
Who are these coming to the sacrifice?
         To what green altar, O mysterious priest,
Lead'st thou that heifer lowing at the skies,
         And all her silken flanks with garlands drest?
What little town by river or sea shore,
         Or mountain-built with peaceful citadel,
                Is emptied of this folk, this pious morn?
And, little town, thy streets for evermore
         Will silent be; and not a soul to tell
                Why thou art desolate, can e'er return.
O Attic shape! Fair attitude! with brede
         Of marble men and maidens overwrought,
With forest branches and the trodden weed;
         Thou, silent form, dost tease us out of thought
As doth eternity: Cold Pastoral!
         When old age shall this generation waste,
                Thou shalt remain, in midst of other woe
Than ours, a friend to man, to whom thou say'st,
         "Beauty is truth, truth beauty,—that is all
                Ye know on earth, and all ye need to know."  <!-- ====================================================== -->
  <!-- 0) TYPE SYSTEM -->
  <!-- ====================================================== -->
  <enums>
    <enum id="WorldOp">
      PRODUCE | MAINTAIN | REPAIR | TRANSFORM
    </enum>
    <enum id="RitualAct">
      INVOCATION | CHANT | WITNESS | QUESTION | SEAL
    </enum>
    <enum id="Role">
      PILGRIM | WITNESS | CONGREGANT | ARCHIVIST | JUDGE | HERALD
    </enum>
    <enum id="AdjacencyMeaning">
      ASSOCIATION | DEVELOPMENT | TENSION
    </enum>
    <enum id="CellState">
      DORMANT | ACTIVE | SEALED | BROKEN | QUARANTINED
    </enum>
    <enum id="EvidenceLevel">
      NONE | TRACE | QUOTE | PARAPHRASE | SOURCELOCK
    </enum>
    <enum id="SilenceKind">
      BREATH | GAP | VEIL | REDACTION | VOID
    </enum>
  </enums>
  <!-- ====================================================== -->
  <!-- 1) GRID SCHEMA -->
  <!-- ====================================================== -->
  <schema id="GridSchema" format="json">
    {
      "grid_id": "string",
      "version": "string",
      "dims": { "rows": 24, "cols": 24 },
      "axioms": {
        "G1_world_not_page": true,
        "G2_position_performs_meaning": true,
        "G3_cells_stage_acts_not_store": true,
        "G4_traversal_produces_understanding": true,
        "G5_repetition_manufactures_reality": true
      },
      "zone_index": ["ZONE_ID..."],
      "cell_index": ["(x,y)..."],
      "traversal_index": ["TRAVERSAL_ID..."],
      "global_constraints": {
        "min_silence_cells_pct": 0.10,
        "min_motif_reuse": 2,
        "motifs_must_cross_zones": true,
        "no_singleton_motifs": true
      }
    }
  </schema>
  <!-- ====================================================== -->
  <!-- 2) ZONE SCHEMA -->
  <!-- ====================================================== -->
  <schema id="ZoneSchema" format="json">
    {
      "zone_id": "string",
      "name": "string",
      "bounds": {
        "coord_set": ["(x,y)..."]  // OR ranges below; choose one.
      },
      "ranges_optional": [
        { "x_min": 10, "x_max": 13, "y_min": 10, "y_max": 13, "exclude": [] }
      ],
      "world_operation": "WorldOp",
      "allowed_acts": ["RitualAct..."],
      "dominant_roles": ["Role..."],
      "ritual_purpose": "string",
      "zone_motifs_required": ["motif_id..."],
      "zone_constraints": {
        "max_broken_cells_pct": 0.05,
        "silence_cells_pct": 0.05,
        "must_include_seal_gate": true,
        "must_include_question_gate": true
      },
      "entry_gates": [
        {
          "gate_id": "string",
          "gate_cells": ["(x,y)..."],
          "required_act": "RitualAct",
          "required_token": "string|null"
        }
      ],
      "exit_gates": [
        {
          "gate_id": "string",
          "gate_cells": ["(x,y)..."],
          "leads_to_zone_id": "string",
          "handoff_rule": "string"
        }
      ]
    }
  </schema>
  <!-- ====================================================== -->
  <!-- 3) CELL SCHEMA -->
  <!-- ====================================================== -->
  <schema id="CellSchema" format="json">
    {
      "coord": "(x,y)",
      "zone_id": "string",
      "cell_state": "CellState",
      "world_operation": "WorldOp",
      "ritual_act": "RitualAct",
      "motif_ids": ["string..."],
      "reader_role": "Role",
      "payload": {
        "title": "string",
        "text_fragment": "string",
        "symbolic_form": "string",  // e.g., 'quote', 'diagram', 'gesture', 'chorus'
        "evidence_level": "EvidenceLevel",
        "source_ref": "string|null", // bibliographic pointer if any
        "time_signature": "string|null" // optional: 'daily', 'weekly', 'epochal'
      },
      "operators": {
        "enter": ["OP..."],
        "perform": ["OP..."],
        "exit": ["OP..."]
      },
      "continuity_hooks": {
        "preferred_next": ["(x,y)..."],
        "avoid_next": ["(x,y)..."],
        "loop_to": "(x,y)|null"
      },
      "silence": {
        "is_silence_cell": false,
        "silence_kind": "SilenceKind|null",
        "silence_rule": "string|null"
      },
      "failure_modes": [
        {
          "id": "string",
          "trigger": "string",
          "block": true,
          "repair_path": ["(x,y)..."]
        }
      ]
    }
  </schema>
  <!-- ====================================================== -->
  <!-- 4) OPERATOR LIBRARY -->
  <!-- ====================================================== -->
  <operator_library>
    <op id="DECLARE_WORLD">
      Creates the local reality claims for this zone/cell.
    </op>
    <op id="REPEAT_MOTIF">
      Replays a motif with slight variation; strengthens MAINTAIN.
    </op>
    <op id="STAGE_CONFLICT">
      Introduces a contending force; must produce TENSION adjacency.
    </op>
    <op id="ASK_PREPOSITION_SHIFT">
      Forces Dewey’s “by/in” shift as a question operator.
    </op>
    <op id="SEAL_PREMISE">
      Locks a claim; marks the cell SEALED; forbids expansion beyond it.
    </op>
    <op id="OPEN_GAP">
      Converts certainty into a QUESTION; may mark a silence cell.
    </op>
    <op id="REPAIR_BREAK">
      Routes to repair path; converts BROKEN → ACTIVE.
    </op>
    <op id="TRANSPOSE_MODEL_OF_FOR">
      Forces “symbol of” ↔ “symbol for” switch; can trigger TRANSFORM.
    </op>
    <op id="ROLE_SHIFT">
      Changes reader_role; must be justified by neighboring cells.
    </op>
  </operator_library>
  <!-- ====================================================== -->
  <!-- 5) ADJACENCY INFERENCE RULES -->
  <!-- ====================================================== -->
  <adjacency_inference>
    <rule id="A1">
      Horizontal neighbor => ASSOCIATION.
      Must share ≥1 motif_id OR share ritual_act.
    </rule>
    <rule id="A2">
      Vertical neighbor => DEVELOPMENT.
      Must increase EvidenceLevel OR deepen world_operation inward:
      TRANSFORM→REPAIR→MAINTAIN→PRODUCE (toward center).
    </rule>
    <rule id="A3">
      Diagonal neighbor => TENSION.
      Must contradict at least one of:
      ritual_act, role, or a declared claim in payload.text_fragment.
    </rule>
  </adjacency_inference>
  <!-- ====================================================== -->
  <!-- 6) TRAVERSAL SCHEMA -->
  <!-- ====================================================== -->
  <schema id="TraversalSchema" format="json">
    {
      "traversal_id": "string",
      "name": "string",
      "mode": "PILGRIMAGE|CIRCULATION|PROCESSION|SPIRAL|FREE",
      "start_cells": ["(x,y)..."],
      "end_cells": ["(x,y)..."],
      "entry_conditions": [
        { "requires_token": "string|null" },
        { "requires_role": "Role|null" },
        { "requires_act": "RitualAct|null" }
      ],
      "step_rule": {
        "max_steps": 144,
        "allowed_moves": ["N","S","E","W","NE","NW","SE","SW"],
        "disallow_backtrack_pct": 0.35
      },
      "path_constraints": {
        "must_enter_zones": ["ZONE_ID..."],
        "must_touch_acts": ["RitualAct..."],
        "min_silence_encounters": 3,
        "min_role_shifts": 2,
        "min_tension_diagonals": 4
      },
      "checkpoints": [
        {
          "checkpoint_id": "string",
          "at_cell": "(x,y)",
          "required_operator": "OP",
          "validation": "string"
        }
      ],
      "completion": {
        "seal_required": true,
        "seal_cells": ["(x,y)..."],
        "completion_artifact": "string" // e.g., 'thesis-line', 'chorus', 'map'
      },
      "failure": {
        "if_stuck": "route_to_repair",
        "repair_zone_id": "string",
        "repair_steps": ["(x,y)..."]
      }
    }
  </schema>
  <!-- ====================================================== -->
  <!-- 7) DEFAULT ZONE DEFINITIONS FOR CAREY RINGS -->
  <!-- ====================================================== -->
  <defaults>
    <zone_default id="CENTER_CORE">
      { "world_operation": "PRODUCE",
        "allowed_acts": ["INVOCATION","SEAL"],
        "dominant_roles": ["JUDGE","ARCHIVIST"]
      }
    </zone_default>
    <zone_default id="INNER_RING">
      { "world_operation": "MAINTAIN",
        "allowed_acts": ["CHANT","WITNESS"],
        "dominant_roles": ["CONGREGANT","WITNESS"]
      }
    </zone_default>
    <zone_default id="MIDDLE_RING">
      { "world_operation": "REPAIR",
        "allowed_acts": ["QUESTION","WITNESS"],
        "dominant_roles": ["ARCHIVIST","PILGRIM"]
      }
    </zone_default>
    <zone_default id="OUTER_RING">
      { "world_operation": "TRANSFORM",
        "allowed_acts": ["QUESTION"],
        "dominant_roles": ["PILGRIM","HERALD"]
      }
    </zone_default>
  </defaults>
  <!-- ====================================================== -->
  <!-- 8) VALIDATION RULESET -->
  <!-- ====================================================== -->
  <validation>
    <v id="V1">
      Every zone must contain at least:
      1 INVOCATION gate, 1 QUESTION gate, 1 SEAL gate (not necessarily distinct).
    </v>
    <v id="V2">
      Every traversal must encounter all four WorldOp values at least once.
    </v>
    <v id="V3">
      No traversal may be purely horizontal or purely vertical.
    </v>
    <v id="V4">
      At least 10% of all cells must be silence.is_silence_cell=true.
    </v>
    <v id="V5">
      Motif reuse: each motif_id appears in ≥2 cells AND ≥2 zones.
    </v>
  </validation>
  <closing_seal>
    These schemas are binding.
    The grid is executable ritual.
  </closing_seal>
</prompt>