<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KIS-01 // INSCRIPTION SYSTEM</title>
    <style>
        :root {
            --bg-color: #050505;
            --grid-line: #1a1a1a;
            --text-primary: #e0e0e0;
            --text-dim: #666;
            --accent-core: #ff3333;   /* Zone E: Truth */
            --accent-loop: #00ff9d;   /* Zone C: Youth/Trees */
            --accent-frieze: #ffbd2e; /* Zone B: Pursuit */
            --accent-void: #4a4a4a;   /* Zone D: Desolation */
            --accent-shell: #ffffff;  /* Zone A: Interface */
            --scan-line: rgba(255, 255, 255, 0.1);
            --font-mono: 'Courier New', Courier, monospace;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            cursor: crosshair;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-primary);
            font-family: var(--font-mono);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            font-size: 12px;
        }

        /* HEADER */
        header {
            border-bottom: 1px solid var(--grid-line);
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #000;
            z-index: 10;
        }

        .sys-status {
            display: flex;
            gap: 20px;
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            background-color: var(--accent-core);
            border-radius: 50%;
            display: inline-block;
            animation: pulse 2s infinite;
        }

        /* LAYOUT */
        main {
            display: flex;
            flex: 1;
            height: calc(100vh - 40px);
        }

        /* GRID VIEWPORT */
        #viewport {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            background-image: 
                linear-gradient(var(--grid-line) 1px, transparent 1px),
                linear-gradient(90deg, var(--grid-line) 1px, transparent 1px);
            background-size: 40px 40px;
            position: relative;
            overflow: hidden;
        }

        /* THE GRID ARTIFACT */
        #urn-grid {
            display: grid;
            grid-template-columns: repeat(24, 1fr);
            grid-template-rows: repeat(24, 1fr);
            gap: 2px;
            width: 80vh; /* Responsive to height */
            height: 80vh;
            max-width: 800px;
            max-height: 800px;
            transform-style: preserve-3d;
            perspective: 1000px;
        }

        .cell {
            background-color: rgba(20, 20, 20, 0.8);
            border: 1px solid #222;
            transition: all 0.1s ease;
            position: relative;
        }

        .cell:hover {
            z-index: 10;
            transform: scale(1.5);
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.2);
            border-color: #fff;
        }

        /* Zone Coloring */
        .zone-e { border-color: rgba(255, 51, 51, 0.3); background: rgba(255, 51, 51, 0.05); }
        .zone-c { border-color: rgba(0, 255, 157, 0.3); background: rgba(0, 255, 157, 0.05); }
        .zone-b { border-color: rgba(255, 189, 46, 0.3); background: rgba(255, 189, 46, 0.05); }
        .zone-d { border-color: rgba(74, 74, 74, 0.2); background: rgba(0, 0, 0, 0.8); } /* The Void */
        .zone-a { border-color: rgba(255, 255, 255, 0.3); background: rgba(255, 255, 255, 0.05); }

        .cell.active {
            background-color: #fff !important;
        }

        /* SIDEBAR (RAYCASTER READOUT) */
        aside {
            width: 350px;
            border-left: 1px solid var(--grid-line);
            padding: 20px;
            display: flex;
            flex-direction: column;
            background: #080808;
            font-family: 'Courier New', Courier, monospace;
        }

        .panel-section {
            margin-bottom: 25px;
            border-bottom: 1px dashed #333;
            padding-bottom: 15px;
        }

        h2 {
            font-size: 10px;
            letter-spacing: 2px;
            color: var(--text-dim);
            text-transform: uppercase;
            margin-bottom: 10px;
        }

        .data-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .data-key { color: var(--text-dim); }
        .data-val { color: var(--accent-shell); font-weight: bold; }

        #payload-display {
            font-size: 14px;
            line-height: 1.4;
            color: var(--text-primary);
            min-height: 60px;
            border-left: 2px solid var(--accent-shell);
            padding-left: 10px;
            margin-top: 10px;
        }

        #compilation-buffer {
            flex: 1;
            overflow-y: auto;
            font-size: 10px;
            color: var(--text-dim);
            border: 1px solid #222;
            padding: 10px;
            background: #000;
        }

        .log-entry {
            margin-bottom: 4px;
            border-bottom: 1px solid #111;
            padding-bottom: 2px;
            display: block;
        }
        
        .log-entry:hover {
            color: #fff;
        }

        /* SCANLINE EFFECT */
        .scan-overlay {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(to bottom, transparent 50%, rgba(0,0,0,0.5) 51%);
            background-size: 100% 4px;
            pointer-events: none;
            opacity: 0.3;
            z-index: 5;
        }

        @keyframes pulse {
            0% { opacity: 1; box-shadow: 0 0 5px var(--accent-core); }
            50% { opacity: 0.5; box-shadow: 0 0 0px var(--accent-core); }
            100% { opacity: 1; box-shadow: 0 0 5px var(--accent-core); }
        }

        /* UTILITIES */
        .zone-badge {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 2px;
            font-size: 10px;
            font-weight: bold;
            color: #000;
        }
        
        /* Mobile warning */
        #mobile-warning {
            display: none;
            position: absolute;
            top:0; left:0; width:100%; height:100%;
            background:black; z-index:999;
            color:white;
            align-items: center; justify-content: center;
            text-align: center; padding: 20px;
        }

        @media (max-width: 768px) {
            #mobile-warning { display: flex; }
        }
    </style>
</head>
<body>
    <div id="mobile-warning">
        SYSTEM REQUIRES DESKTOP TERMINAL<br>FOR SPATIAL INSCRIPTION.
    </div>

    <header>
        <div class="sys-title">KIS-01 // GRECIAN URN INSCRIPTION SYSTEM</div>
        <div class="sys-status">
            <span>MEM: 576 CELLS</span>
            <span>STATUS: ONLINE</span>
            <div class="status-dot"></div>
        </div>
    </header>

    <main>
        <div id="viewport">
            <div class="scan-overlay"></div>
            <div id="urn-grid"></div>
        </div>

        <aside>
            <div class="panel-section">
                <h2>Raycaster Telemetry</h2>
                <div class="data-row">
                    <span class="data-key">COORDS:</span>
                    <span class="data-val" id="disp-coords">--/--</span>
                </div>
                <div class="data-row">
                    <span class="data-key">RADIUS (r):</span>
                    <span class="data-val" id="disp-rad">--</span>
                </div>
                <div class="data-row">
                    <span class="data-key">ZONE:</span>
                    <span id="disp-zone-badge" class="zone-badge" style="background:#333; color:#fff;">WAITING</span>
                </div>
            </div>

            <div class="panel-section">
                <h2>Decoded Inscription</h2>
                <div id="payload-display">Initializing reading protocols...</div>
                <div class="data-row" style="margin-top: 10px;">
                    <span class="data-key">REDUNDANCY:</span>
                    <span class="data-val" id="disp-role">--</span>
                </div>
            </div>

            <div class="panel-section" style="flex:1; display:flex; flex-direction:column; border:none; padding-bottom:0;">
                <h2>Compilation Buffer</h2>
                <div id="compilation-buffer">
                    <!-- Clicked lines go here -->
                </div>
            </div>
        </aside>
    </main>

    <script>
        // --- CONSTANTS ---
        const GRID_SIZE = 24;
        const CENTER = 11.5;

        // --- SOURCE TEXT DATA ---
        const SOURCE_TEXT = {
            "ZONE_A": [
                "Thou still unravish'd bride of quietness,",
                "Thou foster-child of silence and slow time,",
                "Sylvan historian, who canst thus express",
                "A flowery tale more sweetly than our rhyme:",
                "O Attic shape! Fair attitude! with brede",
                "Of marble men and maidens overwrought,",
                "With forest branches and the trodden weed;",
                "Thou, silent form, dost tease us out of thought",
                "As doth eternity: Cold Pastoral!",
                "When old age shall this generation waste,",
                "Thou shalt remain, in midst of other woe",
                "Than ours, a friend to man, to whom thou say'st,"
            ],
            "ZONE_B": [
                "What leaf-fring'd legend haunts about thy shape",
                "Of deities or mortals, or of both,",
                "In Tempe or the dales of Arcady?",
                "What men or gods are these? What maidens loth?",
                "What mad pursuit? What struggle to escape?",
                "What pipes and timbrels? What wild ecstasy?",
                "Heard melodies are sweet, but those unheard",
                "Are sweeter; therefore, ye soft pipes, play on;",
                "Not to the sensual ear, but, more endear'd,",
                "Pipe to the spirit ditties of no tone:"
            ],
            "ZONE_C": [
                "Fair youth, beneath the trees, thou canst not leave",
                "Thy song, nor ever can those trees be bare;",
                "Bold Lover, never, never canst thou kiss,",
                "Though winning near the goal yet, do not grieve;",
                "She cannot fade, though thou hast not thy bliss,",
                "For ever wilt thou love, and she be fair!",
                "Ah, happy, happy boughs! that cannot shed",
                "Your leaves, nor ever bid the Spring adieu;",
                "And, happy melodist, unwearied,",
                "For ever piping songs for ever new;",
                "More happy love! more happy, happy love!",
                "For ever warm and still to be enjoy'd,",
                "For ever panting, and for ever young;",
                "All breathing human passion far above,",
                "That leaves a heart high-sorrowful and cloy'd,",
                "A burning forehead, and a parching tongue."
            ],
            "ZONE_D": [
                "Who are these coming to the sacrifice?",
                "To what green altar, O mysterious priest,",
                "Lead'st thou that heifer lowing at the skies,",
                "And all her silken flanks with garlands drest?",
                "What little town by river or sea shore,",
                "Or mountain-built with peaceful citadel,",
                "Is emptied of this folk, this pious morn?",
                "And, little town, thy streets for evermore",
                "Will silent be; and not a soul to tell",
                "Why thou art desolate, can e'er return."
            ],
            "ZONE_E": [
                "\"Beauty is truth, truth beauty,â€”that is all",
                "Ye know on earth, and all ye need to know.\""
            ]
        };

        const ZONE_CONFIG = {
            "ZONE_E": { name: "CORE: TRUTH", color: "#ff3333", role: "AXIOM", class: "zone-e" },
            "ZONE_C": { name: "LOOP: YOUTH", color: "#00ff9d", role: "ECHO", class: "zone-c" },
            "ZONE_B": { name: "FRIEZE: ACTION", color: "#ffbd2e", role: "GLUE", class: "zone-b" },
            "ZONE_D": { name: "VOID: DESOLATION", color: "#888888", role: "NULL", class: "zone-d" },
            "ZONE_A": { name: "SHELL: INTERFACE", color: "#ffffff", role: "ADDR", class: "zone-a" }
        };

        // --- GRID LOGIC ---
        function getZone(x, y) {
            const r = Math.sqrt(Math.pow(x - CENTER, 2) + Math.pow(y - CENTER, 2));
            if (r < 4.0) return ["ZONE_E", r];
            if (r < 8.0) return ["ZONE_C", r];
            if (r < 10.0) return ["ZONE_B", r];
            if (r < 11.5) return ["ZONE_D", r];
            return ["ZONE_A", r];
        }

        function initGrid() {
            const gridEl = document.getElementById('urn-grid');
            const cursors = { "ZONE_A": 0, "ZONE_B": 0, "ZONE_C": 0, "ZONE_D": 0, "ZONE_E": 0 };
            
            for (let y = 0; y < GRID_SIZE; y++) {
                for (let x = 0; x < GRID_SIZE; x++) {
                    const [zoneId, r] = getZone(x, y);
                    const config = ZONE_CONFIG[zoneId];
                    
                    // Get Text Payload cyclically
                    const lines = SOURCE_TEXT[zoneId];
                    const text = lines[cursors[zoneId] % lines.length];
                    cursors[zoneId]++;

                    // Create DOM Element
                    const cell = document.createElement('div');
                    cell.className = `cell ${config.class}`;
                    cell.dataset.x = x;
                    cell.dataset.y = y;
                    cell.dataset.r = r.toFixed(2);
                    cell.dataset.zone = zoneId;
                    cell.dataset.text = text;
                    cell.dataset.role = config.role;
                    
                    // Interaction Events
                    cell.addEventListener('mouseenter', handleHover);
                    cell.addEventListener('click', handleClick);
                    
                    gridEl.appendChild(cell);
                }
            }
        }

        // --- RAYCASTER LOGIC ---
        const uiCoords = document.getElementById('disp-coords');
        const uiRad = document.getElementById('disp-rad');
        const uiZone = document.getElementById('disp-zone-badge');
        const uiPayload = document.getElementById('disp-payload');
        const uiRole = document.getElementById('disp-role');
        const uiText = document.getElementById('payload-display');
        const uiBuffer = document.getElementById('compilation-buffer');

        function handleHover(e) {
            const cell = e.target;
            const zoneId = cell.dataset.zone;
            const config = ZONE_CONFIG[zoneId];

            // Update UI
            uiCoords.innerText = `[${cell.dataset.x}, ${cell.dataset.y}]`;
            uiRad.innerText = cell.dataset.r;
            
            uiZone.innerText = config.name;
            uiZone.style.backgroundColor = config.color;
            uiZone.style.color = (zoneId === "ZONE_E" || zoneId === "ZONE_B") ? "#000" : "#000";

            uiText.innerText = cell.dataset.text;
            uiText.style.borderColor = config.color;
            
            uiRole.innerText = cell.dataset.role;
            uiRole.style.color = config.color;
        }

        function handleClick(e) {
            const cell = e.target;
            const text = cell.dataset.text;
            const zoneId = cell.dataset.zone;
            const config = ZONE_CONFIG[zoneId];

            // Visual Feedback
            cell.style.backgroundColor = "#fff";
            setTimeout(() => { cell.style.backgroundColor = ""; }, 200);

            // Add to Buffer
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            entry.style.borderLeft = `3px solid ${config.color}`;
            entry.style.paddingLeft = '5px';
            entry.innerText = `[${zoneId.split('_')[1]}] ${text}`;
            uiBuffer.prepend(entry);
        }

        // --- INITIALIZATION ---
        initGrid();

        // Boot Sequence Simulation
        setTimeout(() => {
            uiText.innerText = "SYSTEM READY.\nINITIATE SPATIAL READING.";
        }, 1000);

    </script>
</body>
</html>